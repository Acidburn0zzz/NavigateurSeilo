clone_depth: 10
shallow_clone: true

environment:
    matrix:
    - PLATFORM: x86
      QT5: C:\Qt\5.8\msvc2015
    - PLATFORM: x86_amd64
      QT5: C:\Qt\5.8\msvc2015_64

install:
    - call "%ProgramFiles(x86)%\Microsoft Visual Studio 14.0\VC\vcvarsall.bat" %PLATFORM%

before_build:
    - set Path=%QT5%\bin;%Path%
    - mkdir build

build_script:
    - cmake -G "NMake Makefiles" -H. -Bbuild -DCMAKE_PREFIX_PATH=%QT5%
    - cmake --build build

artifacts:

  # pushing a single file
  - path: Sielo.zip

  # pushing a single file with environment variable in path and "Deployment name" specified
  - path: SieloNavigateur\bin\$(configuration)
    name: sielo_navigateur

  # pushing entire folder as a zip archive
  - path: logs

  # pushing all *.nupkg files in build directory recursively
  - path: '**\*.nupkg'
